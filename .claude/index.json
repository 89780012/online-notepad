{
  "timestamp": "2025-09-03T10:14:14.000Z",
  "project_name": "online-notepad",
  "scan_summary": {
    "total_estimated_files": 65,
    "scanned_files": 45,
    "coverage_percentage": 69.2,
    "truncated": false,
    "scan_phases_completed": ["file_inventory", "module_priority_scan", "deep_supplement"],
    "scan_strategy": "adaptive_architect_v3"
  },
  "modules": [
    {
      "name": "src",
      "path": "src/",
      "type": "frontend_application",
      "language": "TypeScript",
      "status": "active",
      "documentation": "src/CLAUDE.md",
      "description": "Next.js应用主体，包含页面、API、组件、编辑器",
      "entry_points": [
        "app/[locale]/page.tsx",
        "app/[locale]/layout.tsx",
        "middleware.ts"
      ],
      "key_interfaces": [
        "API routes: /api/notes, /api/notes/share/[token]",
        "Page routes: /[locale]/, /[locale]/share/[token]",
        "ThemeContext API"
      ],
      "dependencies": [
        "react@19.1.0",
        "next@15.5.2",
        "next-intl@4.3.5",
        "@prisma/client@6.15.0",
        "tailwindcss@4.0"
      ],
      "test_coverage": "0%",
      "file_count": 41,
      "key_features": [
        "多种编辑模式（纯文本/Markdown）",
        "专注模式",
        "主题系统（亮色/暗黑/系统自适应）",
        "垂直工具栏",
        "增强Markdown编辑器",
        "国际化支持"
      ],
      "coverage": {
        "interfaces": "complete",
        "dependencies": "complete", 
        "tests": "missing",
        "dataModel": "complete"
      }
    },
    {
      "name": "prisma",
      "path": "prisma/",
      "type": "database_model",
      "language": "Prisma Schema",
      "status": "active",
      "documentation": "prisma/CLAUDE.md",
      "description": "数据库schema定义和迁移",
      "entry_points": [
        "schema.prisma"
      ],
      "key_interfaces": [
        "Note model with customSlug support",
        "Generated TypeScript types",
        "Prisma Client API"
      ],
      "dependencies": [
        "@prisma/client@6.15.0",
        "prisma@6.15.0"
      ],
      "test_coverage": "0%",
      "file_count": 4,
      "key_features": [
        "PostgreSQL支持",
        "自定义分享链接（customSlug）",
        "多语言支持",
        "时间戳自动管理"
      ],
      "coverage": {
        "schema": "complete",
        "migrations": "complete",
        "seeds": "missing",
        "tests": "missing"
      }
    },
    {
      "name": "public",
      "path": "public/",
      "type": "static_assets",
      "language": "Assets",
      "status": "active",
      "description": "静态资源文件、SEO配置",
      "file_count": 7,
      "key_features": [
        "图标文件",
        "SEO配置（robots.txt, sitemap.xml）"
      ]
    },
    {
      "name": "docs", 
      "path": "docs/",
      "type": "documentation",
      "language": "Markdown",
      "status": "active",
      "description": "项目文档和策略文件",
      "file_count": 1,
      "key_features": [
        "关键词策略文档"
      ]
    }
  ],
  "root_config_files": [
    "package.json",
    "next.config.ts", 
    "tsconfig.json",
    "eslint.config.mjs",
    "components.json",
    "postcss.config.mjs",
    "CLAUDE.md"
  ],
  "ignored_patterns": [
    "node_modules/**",
    ".git/**",
    ".github/**", 
    "dist/**",
    "build/**",
    ".next/**",
    "__pycache__/**",
    "*.lock",
    "*.log",
    "*.bin",
    "*.pdf",
    "*.png",
    "*.jpg", 
    "*.jpeg",
    "*.gif",
    "*.mp4",
    "*.zip",
    "*.tar",
    "*.gz"
  ],
  "ignored_file_count": 15000,
  "architecture_highlights": {
    "frameworks": ["Next.js 15.5.2 App Router", "React 19.1.0"],
    "ui_library": ["Tailwind CSS 4.0", "Radix UI", "Lucide React"],
    "database": ["PostgreSQL", "Prisma ORM"],
    "features": [
      "多语言支持（中英文）",
      "多种编辑模式",
      "专注模式", 
      "主题系统",
      "自定义分享链接",
      "Markdown增强编辑器",
      "垂直工具栏",
      "本地存储支持"
    ]
  },
  "coverage_gaps": [
    {
      "category": "testing",
      "priority": "high",
      "description": "缺少测试文件，建议覆盖率达到80%+",
      "affected_modules": ["src", "prisma"],
      "recommendations": [
        "添加组件单元测试（EnhancedMarkdownEditor, VerticalToolbar）",
        "添加API路由集成测试",
        "添加Hook测试（useLocalNotes）",
        "添加数据库模型测试"
      ]
    },
    {
      "category": "performance",
      "priority": "medium", 
      "description": "性能优化机会",
      "affected_modules": ["src"],
      "recommendations": [
        "实现组件懒加载",
        "优化Markdown渲染性能",
        "添加缓存策略",
        "优化包大小"
      ]
    },
    {
      "category": "accessibility",
      "priority": "medium",
      "description": "可访问性改进",
      "affected_modules": ["src"],
      "recommendations": [
        "改善键盘导航",
        "增强屏幕阅读器支持",
        "优化焦点管理",
        "添加ARIA标签"
      ]
    },
    {
      "category": "error_handling",
      "priority": "medium",
      "description": "错误处理和边界保护",
      "affected_modules": ["src"],
      "recommendations": [
        "添加React Error Boundary",
        "改善API错误处理",
        "添加用户友好的错误提示",
        "实现错误日志记录"
      ]
    },
    {
      "category": "security",
      "priority": "medium",
      "description": "Markdown编辑器安全防护",
      "affected_modules": ["src"],
      "recommendations": [
        "添加XSS防护",
        "实现内容净化",
        "配置CSP策略",
        "验证用户输入"
      ]
    },
    {
      "category": "database",
      "priority": "low",
      "description": "数据库优化和管理",
      "affected_modules": ["prisma"],
      "recommendations": [
        "添加种子数据脚本",
        "优化数据库索引",
        "实现备份策略",
        "添加性能监控"
      ]
    }
  ],
  "next_steps_recommendations": [
    {
      "priority": "high",
      "category": "testing",
      "tasks": [
        "建立测试框架（Jest + Testing Library）",
        "为核心组件添加单元测试",
        "创建API路由集成测试",
        "添加E2E测试覆盖关键流程"
      ]
    },
    {
      "priority": "high", 
      "category": "security",
      "tasks": [
        "为Markdown编辑器添加XSS防护",
        "实现内容净化处理",
        "配置安全策略头"
      ]
    },
    {
      "priority": "medium",
      "category": "tooling", 
      "tasks": [
        "配置Prettier代码格式化",
        "设置pre-commit hooks",
        "添加代码覆盖率报告",
        "优化开发工作流"
      ]
    },
    {
      "priority": "medium",
      "category": "performance",
      "tasks": [
        "实现组件懒加载",
        "优化打包配置",
        "添加性能监控",
        "实现缓存策略"
      ]
    },
    {
      "priority": "low",
      "category": "enhancement",
      "tasks": [
        "创建数据库种子脚本",
        "添加更多编辑模式", 
        "扩展垂直工具栏功能",
        "改善移动端体验"
      ]
    }
  ],
  "scan_metadata": {
    "scan_strategy": "adaptive_architect_v3",
    "phases": {
      "phase_a": "file_inventory_complete",
      "phase_b": "module_priority_scan_complete",
      "phase_c": "deep_supplement_complete"
    },
    "tool_usage": {
      "glob_calls": 8,
      "read_calls": 15, 
      "write_calls": 3
    },
    "duration_estimate": "15 minutes",
    "incremental_update_ready": true,
    "breakpoint_continuation_ready": true
  },
  "quality_metrics": {
    "code_organization": "excellent",
    "type_safety": "excellent", 
    "architecture_clarity": "excellent",
    "documentation_completeness": "good",
    "test_coverage": "poor",
    "security_posture": "needs_improvement",
    "performance_optimization": "moderate"
  },
  "technology_debt": {
    "high_priority": [
      "缺少测试覆盖",
      "Markdown XSS防护缺失", 
      "错误边界处理不足"
    ],
    "medium_priority": [
      "代码格式化工具缺失",
      "性能优化机会",
      "可访问性改进空间"
    ],
    "low_priority": [
      "数据库种子数据",
      "更多编辑模式支持",
      "监控和日志系统"
    ]
  }
}